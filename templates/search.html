{% extends "layout.html" %} <!-- extends the general layout scheme -->

<!-- Searching page -->
{% block content %}
    <h1>Search Database</h1>

    <!-- Search textbox and button style -->
    <div class="search-wrapper">
        <form method="POST" action="/search" class="search-form">
            <input type="text" name="query" placeholder="Ah... The things I know" value="{{ query }}">
            <button type="submit">Search</button>
        </form>
    </div> 

    <p style="color: green; font-weight: bold;">You can click on the text to bring you to the page.</p>

    <!-- Lists the results out according to genre -->
    <div class="results-grid">
        {% if results %}
            {% set has_any_results = false %}
            {% for table_name, items in results.items() %}
                <div class="results-column">
                    <h2>{{ table_name.capitalize() }}</h2>
                    {% if items %}
                        {% set has_any_results = true %}
                        <ul>
                            <!-- Loop for each item -->
                            {% for item in items %}
                                {% if table_name == 'items' %}
                                    <li>
                                        <a href="{{ url_for('item_info', name=item[1]|lower) }}">
                                            {{ item[1] }}
                                        </a>
                                    </li>
                                {% elif table_name == 'survivors' %}
                                    <li>
                                        <a href="{{ url_for('survivor_info', name=item[1]|lower) }}">
                                            {{ item[1] }}
                                        </a>
                                    </li>
                                {% elif table_name == 'abilities' %}
                                    <li>
                                        <a href="{{ url_for('abilities_info', name=item[1]|lower) }}">
                                            {{ item[1] }}
                                        </a>
                                    </li>
                                {% elif table_name == 'maps' %}
                                    <li>
                                        <a href="{{ url_for('map_info', name=item[1]|lower) }}">
                                            {{ item[1] }}
                                        </a>
                                    </li>
                                {% elif table_name == 'boss' %}
                                    <li>
                                        <a href="{{ url_for('boss_info', name=item[1]|lower) }}">
                                            {{ item[1] }}
                                        </a>
                                    </li>
                                {% endif %}
                            {% endfor %}
                            <p>Total results in {{ table_name }}: {{ items|length }}</p>
                        </ul>
                    <!-- Error handler -->
                    {% else %}
                        <p class="no-results">No results found in {{ table_name }}.</p>
                    {% endif %}
                </div>
            {% endfor %}
        {% endif %}
    </div>
{% endblock %}
